<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Snacks Ordering</title>
<style>
body { font-family: Arial,sans-serif; background:#fffae5; margin:0; padding:0; }
header { background:#ff9800; color:#fff; padding:20px; text-align:center; font-weight:bold; }
.container { display:grid; grid-template-columns: repeat(auto-fit,minmax(280px,1fr)); gap:20px; padding:15px; max-width:900px; margin:auto; }
.item { background:#fff; padding:15px; border-radius:12px; box-shadow:0 4px 10px rgba(0,0,0,0.1); }
.qty-control { display:flex; align-items:center; gap:5px; margin:5px 0; }
.qty-control button { width:30px; height:30px; border:none; border-radius:50%; background:#ff9800; color:white; cursor:pointer; }
.qty-control input { width:40px; text-align:center; border:1px solid #ccc; border-radius:5px; }
.add-cart { width:100%; padding:8px; border:none; background:#ff9800; color:white; font-weight:bold; cursor:pointer; border-radius:8px; }
#cart { background:#fff; padding:15px; border-radius:12px; margin-top:20px; box-shadow:0 4px 10px rgba(0,0,0,0.1); }
#cart ul { list-style:none; padding:0; margin:0; }
#cart li { margin-bottom:5px; }
#cart li button { margin-left:5px; background:red; color:white; border:none; padding:2px 5px; border-radius:5px; cursor:pointer; }
#total { font-weight:bold; margin-top:10px; }
#upiPay { display:inline-block; margin-top:10px; padding:10px 15px; background:#4caf50; color:white; border-radius:8px; text-decoration:none; font-weight:bold; }
</style>
</head>
<body>

<header>Snacks Ordering</header>

<div class="container">

  <div class="item">
    <h3>Nachos Chat - ₹50</h3>
    <div class="qty-control">
      <button onclick="changeQty('nachosQty',-1)">-</button>
      <input type="number" value="0" id="nachosQty" readonly>
      <button onclick="changeQty('nachosQty',1)">+</button>
    </div>
    <div class="qty-control">
      <button onclick="changeQty('mayoNachos',1)">+ Mayo (+₹10)</button>
      <button onclick="changeQty('mayoNachos',-1)">-</button>
      <input type="number" value="0" id="mayoNachos" readonly>
    </div>
    <button class="add-cart" onclick="addToCart('Nachos Chat',50,'nachosQty','mayoNachos')">Add to Cart</button>
  </div>

  <div class="item">
    <h3>Mixed Lays + Kurkure + Puffcorn Chat - ₹40</h3>
    <div class="qty-control">
      <button onclick="changeQty('mixedQty',-1)">-</button>
      <input type="number" value="0" id="mixedQty" readonly>
      <button onclick="changeQty('mixedQty',1)">+</button>
    </div>
    <div class="qty-control">
      <button onclick="changeQty('mayoMixed',1)">+ Mayo (+₹10)</button>
      <button onclick="changeQty('mayoMixed',-1)">-</button>
      <input type="number" value="0" id="mayoMixed" readonly>
    </div>
    <button class="add-cart" onclick="addToCart('Mixed Lays + Kurkure + Puffcorn Chat',40,'mixedQty','mayoMixed')">Add to Cart</button>
  </div>

</div>

<div id="cart">
<h2>Your Cart</h2>
<ul id="cartItems"></ul>
<h3>Total: ₹<span id="total">0</span></h3>
<a id="upiPay" href="#" target="_blank">Pay Now via UPI</a>
</div>

<script>
let cart=[], total=0;

function changeQty(id,val){
  let input=document.getElementById(id);
  let current=parseInt(input.value)+val;
  if(current<0) current=0;
  input.value=current;
}

function addToCart(name,price,qtyId,addonId){
  let qty=parseInt(document.getElementById(qtyId).value);
  if(qty<=0){ alert("Select at least 1 item"); return; }
  let addonQty=parseInt(document.getElementById(addonId).value);
  let itemTotal = qty*price + addonQty*10;
  cart.push({name, qty, addonQty:addonQty, price, total:itemTotal});
  total+=itemTotal;
  updateCart();
}

function updateCart(){
  let ul=document.getElementById('cartItems');
  ul.innerHTML='';
  cart.forEach((item,index)=>{
    let li=document.createElement('li');
    let addonText = item.addonQty>0 ? ` +Mayo${item.addonQty}` : '';
    li.innerText = `${item.name} x${item.qty}${addonText} = ₹${item.total}`;
    let btn=document.createElement('button');
    btn.innerText='Remove';
    btn.onclick=()=>removeItem(index);
    li.appendChild(btn);
    ul.appendChild(li);
  });
  document.getElementById('total').innerText=total.toFixed(2);
  updateUPILink();
}

function removeItem(index){
  total-=cart[index].total;
  cart.splice(index,1);
  updateCart();
}

function updateUPILink(){
  let upiId="rachitbajpai082@okicici";
  let amount=total.toFixed(2);
  if(total>0){
    let customerName=prompt("Enter your name for UPI note")||"Customer";
    // Clean minimal note: only customer name + items x qty + total
    let noteItems = cart.map(i=>{
      let addon=i.addonQty>0 ? `+Mayo${i.addonQty}`:'';
      return `${i.name}x${i.qty}${addon}`;
    }).join(';');
    let note=`${customerName};${noteItems};Total₹${amount}`;
    document.getElementById('upiPay').href=
      `upi://pay?pa=${upiId}&pn=${encodeURIComponent(customerName)}&am=${amount}&cu=INR&tn=${encodeURIComponent(note)}`;
  }else{
    document.getElementById('upiPay').href="#";
  }
}
</script>

</body>
</html>
