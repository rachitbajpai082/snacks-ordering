<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Snacks Ordering</title>
  <style>
    body { font-family: Arial, sans-serif; margin:0; padding:0; background: #fffae5; }
    header { background:#ff9800; color:white; padding:20px; text-align:center; font-size:24px; font-weight:bold; }
    .container { padding:15px; max-width:900px; margin:auto; display:grid; grid-template-columns: repeat(auto-fit,minmax(280px,1fr)); gap:20px; }
    .item { background:#fff; padding:15px; border-radius:15px; box-shadow:0 4px 10px rgba(0,0,0,0.1); transition: transform 0.3s; }
    .item:hover { transform: translateY(-3px); }
    .qty-control { display:flex; align-items:center; gap:5px; margin-bottom:10px; }
    .qty-control button { width:30px; height:30px; border:none; border-radius:50%; background:#ff9800; color:white; font-weight:bold; cursor:pointer; }
    .qty-control input { width:40px; text-align:center; font-size:14px; border-radius:5px; border:1px solid #ccc; }
    .addons { display:flex; align-items:center; gap:5px; margin-bottom:10px; }
    .addons button { padding:5px 10px; border:none; border-radius:5px; background:#ffd54f; cursor:pointer; font-weight:600; }
    .addons input { width:35px; text-align:center; border:none; background:transparent; font-weight:600; }
    .add-cart { width:100%; padding:10px; border:none; border-radius:8px; background:#ff9800; color:white; font-weight:bold; cursor:pointer; }
    #cart { background:#fff; padding:15px; border-radius:15px; margin-top:20px; box-shadow:0 4px 10px rgba(0,0,0,0.1); }
    #cart ul { list-style:none; padding:0; margin:0; }
    #cart li { margin-bottom:8px; }
    #cart li button { margin-left:10px; background:red; color:white; border:none; padding:3px 6px; border-radius:5px; cursor:pointer; }
    #total { font-weight:bold; margin-top:10px; }
    #upiPay { margin-top:15px; display:inline-block; padding:10px 15px; background:#4caf50; color:white; border-radius:8px; text-decoration:none; font-weight:bold; }
  </style>
</head>
<body>
  <header>Snacks Ordering</header>

  <div class="container">
    <div class="item">
      <h3>Nachos Chat - ₹50</h3>
      <div class="qty-control">
        <button onclick="changeQty('nachosQty',-1)">-</button>
        <input type="number" value="0" id="nachosQty" readonly>
        <button onclick="changeQty('nachosQty',1)">+</button>
      </div>
      <div class="addons">
        <button onclick="changeQty('mayoNachos',1)">+ Mayo (+₹10)</button>
        <button onclick="changeQty('mayoNachos',-1)">-</button>
        <input type="number" id="mayoNachos" value="0" readonly>
      </div>
      <button class="add-cart" onclick="addToCart('Nachos Chat',50,'nachosQty','mayoNachos')">Add to Cart</button>
    </div>

    <div class="item">
      <h3>Mixed Lays + Kurkure + Puffcorn Chat - ₹40</h3>
      <div class="qty-control">
        <button onclick="changeQty('mixedQty',-1)">-</button>
        <input type="number" value="0" id="mixedQty" readonly>
        <button onclick="changeQty('mixedQty',1)">+</button>
      </div>
      <div class="addons">
        <button onclick="changeQty('mayoMixed',1)">+ Mayo (+₹10)</button>
        <button onclick="changeQty('mayoMixed',-1)">-</button>
        <input type="number" id="mayoMixed" value="0" readonly>
      </div>
      <button class="add-cart" onclick="addToCart('Mixed Lays+Kurkure+Puffcorn Chat',40,'mixedQty','mayoMixed')">Add to Cart</button>
    </div>
  </div>

  <div id="cart">
    <h2>Your Cart</h2>
    <ul id="cartItems"></ul>
    <h3>Total: ₹<span id="total">0</span></h3>
    <a id="upiPay" href="#" target="_blank">Pay Now via UPI</a>
  </div>

  <script>
    let cart = [];
    let total = 0;

    function changeQty(id, val) {
      let input = document.getElementById(id);
      let current = parseInt(input.value);
      current += val;
      if (current < 0) current = 0;
      input.value = current;
    }

    function addToCart(name, price, qtyId, addonId) {
      let qty = parseInt(document.getElementById(qtyId).value);
      if (qty <= 0) {
        alert("Select at least 1 item");
        return;
      }
      let addonQty = parseInt(document.getElementById(addonId).value);
      let itemTotal = (qty * price) + (addonQty * 10);
      cart.push({ name, qty, addonQty: addonQty, price, total: itemTotal });
      total += itemTotal;
      updateCart();
    }

    function updateCart() {
      let ul = document.getElementById('cartItems');
      ul.innerHTML = '';
      cart.forEach((item, index) => {
        let li = document.createElement('li');
        li.innerHTML = `<b>${item.name}</b> x${item.qty} = ₹${item.qty * item.price}`;
        if (item.addonQty > 0) {
          li.innerHTML += `<br>+Mayo x${item.addonQty} = ₹${item.addonQty * 10}`;
        }
        let btn = document.createElement('button');
        btn.innerText = 'Remove';
        btn.onclick = () => removeItem(index);
        li.appendChild(btn);
        ul.appendChild(li);
      });
      document.getElementById('total').innerText = total;
      updateUPILink();
    }

    function removeItem(index) {
      total -= cart[index].total;
      cart.splice(index, 1);
      updateCart();
    }

    // Correct UPI Payment Link
    function updateUPILink() {
      let upiId = "rachitbajpai082@okicici"; // <-- your UPI ID
      if (total <= 0) {
        document.getElementById('upiPay').href = "#";
        return;
      }
      let customerName = prompt("Enter your name for UPI note:");
      if (!customerName) customerName = "Customer";

      // Make a minimal note with + and -
      let noteItems = cart.map(item => {
        let abbrev = item.name.split(/\s+/).map(w => w[0].toUpperCase()).join('');
        let qtyStr = item.qty;
        if (item.addonQty > 0) qtyStr += `+M${item.addonQty}`;
        return `${abbrev}x${qtyStr}`;
      }).join('-');

      let note = `${customerName}-${noteItems}-Total${total}`;

      // Build UPI link with integer amount
      document.getElementById('upiPay').href =
        `upi://pay?pa=${upiId}&pn=${encodeURIComponent(customerName)}&am=${Math.round(total)}&cu=INR&tn=${encodeURIComponent(note)}`;
    }
  </script>
</body>
</html>
